# Adobe Commerce Optimizer Java SDK

The Adobe Commerce Optimizer (ACO) Java SDK provides an easy integration point with the Adobe Commerce Optimizer Data Ingestion API. With the ACO SDK, you do not need to manage the full integration with catalog ingestion APIs and IMS authentication methods. Simply follow the guide below to install and begin using the ACO client SDK directly in your Java project.

For complete Merchandising Services documentation, visit the [Adobe Developer Documentation](https://developer-stage.adobe.com/commerce/services/composable-catalog/) site.

## Requirements

- Java 11+
- Maven 3.6+

## Build the SDK

To generate the SDK from the OpenAPI spec using the Maven plugin:

```bash
mvn clean install
```

This will:

- Download the latest OpenAPI spec file.
- Generate SDK classes using custom Mustache templates.
- Format the generated Java code using Spotless and google-java-format.

## Initialize the SDK

To start ingesting your catalog into Adobe Commerce Optimizer, you need to create a client using `ClientBuilder`. The builder requires a configuration object of type `ClientConfig`. This object requires the following:

Environment variables must be set with the corresponding values:

- `IMS_CLIENT_ID`: This is your client id found in the Adobe Developer Console.
- `IMS_CLIENT_SECRET`: This is your client secret found in the Adobe Developer Console.
- `TENANT_ID`: This is the identifier for your ACO instance.
- `REGION`: This is the region in which your ACO instance is deployed. Example: `na1`.
- `ENVIRONMENT`: This is your ACO instance's environment type: `sandbox` or `production`.

### Example

```java
AdobeCredentials credentials = new AdobeCredentials(clientId, clientSecret);
ClientConfig config = new ClientConfig(credentials, tenantId, Region.NA1, Environment.SANDBOX);
Client client = ClientBuilder.createClient(config);
```

Once the client is initialized, you can begin ingesting your catalog data into Adobe Commerce Optimizer.

## Ingest Catalog Data

The ACO SDK Client provides methods to easily manage the following catalog entities:

- Products
- Product Metadata
- Price Books
- Prices

All operations are synchronous. For example:

### Create Products

```java
FeedProduct product = new FeedProduct();
product.setSku("EXAMPLE-SKU-001");
product.setScope(new Scope("en-US"));
product.setName("Example Product");
product.setSlug("example-product");
product.setDescription("This is an example product created via the SDK");
product.setStatus(FeedProduct.StatusEnum.ENABLED);
product.setVisibleIn(List.of(
    FeedProduct.VisibleInEnum.CATALOG,
    FeedProduct.VisibleInEnum.SEARCH));

ProductAttribute attribute = new ProductAttribute();
attribute.setCode("brand");
attribute.setType(ProductAttribute.TypeEnum.STRING);
attribute.setValues(List.of("Example Brand"));
product.setAttributes(List.of(attribute));

ProcessFeedResponse response = client.createProductsSync(List.of(product));
System.out.println(response);
```

### More Examples

Refer to the Java SDK source code for more examples on using the following methods:

- `createProductMetadataSync`
- `updateProductMetadataSync`
- `deleteProductMetadataSync`
- `createPriceBooksSync`
- `updatePriceBooksSync`
- `deletePriceBooksSync`
- `createPricesSync`
- `updatePricesSync`
- `deletePricesSync`

## Development Notes

### Generating SDK from OpenAPI spec

The SDK uses a custom `generator-config.yaml` file and mustache templates stored in the `generator/templates` directory. The OpenAPI generator Maven plugin uses these to produce the classes inside `src/main/java`.

To modify generated classes:

- Edit the mustache templates.
- Run `mvn clean install` to regenerate the SDK code.

## Code Generation Notice

This SDK includes **autogenerated code** based on the Adobe Commerce Optimizer OpenAPI specification.

To improve usability, all generated classes (models, API interface, and implementation) are **already committed** to this repository. This allows you to clone and start using the SDK immediately without needing to run a generation step.

If you want to **regenerate the SDK code** (e.g., after updating the OpenAPI spec or custom templates), you can do so using Maven:

```bash
mvn clean install
```

> ðŸ“Œ **Important:**
> - Do **not manually edit** any of the generated files.
> - Custom templates are located in `generator/templates`.
> - Configuration for code generation is found in `generator/generator-config.yaml`.
> - To ignore specific files from generation, use the `.openapi-generator-ignore` file.

If you prefer to manage your own generation flow, you can delete the generated files and use `mvn openapi-generator:generate` directly.

### Formatting Code

All Java code is formatted automatically using Spotless and `google-java-format` via the Maven plugin.

To apply formatting manually:

```bash
mvn spotless:apply
```

## License

This project is licensed under the terms of the Adobe License.
